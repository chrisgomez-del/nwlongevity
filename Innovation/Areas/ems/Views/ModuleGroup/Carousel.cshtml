@using EMS.ems.Models
@using Sitecore
@using Sitecore.Mvc
@using Sitecore.Mvc.Presentation
@using EMS.Areas.ems.Helper
@using EMS.Areas.ems.Models
@using Sitecore.Resources.Media
@using Sitecore.Mvc.Extensions
@model ModuleGroup

@{
    Layout = null;
    var j = 1;
}

<carousel>
    @if (Model != null && Model.modules != null && Model.modules.Any())
    {


        <div id="@Model.GroupId" class="carousel slide" data-ride="carousel">
            <ol class="carousel-indicators">
                @for (var i = 0; i < Model.modules.Count(); i++)
                {
                    <li data-target=@("#"+Model.GroupId) data-slide-to="@i" class="@(@i == Model.modules.Count()-1 ? "active" : "")"></li>
                }
            </ol>
            <div class="carousel-inner">
                @foreach (var item in Model.modules)
                {

                    <div class="carousel-item @(@Model.modules.Count() == j ? "active" : "")">
                        <img src="@item.Image" class="carouselimage"/>

                        <div class="container">
                            <div class="carousel-caption @("text-"+SitecoreAccess.getDroplinkSelectedItem(item.Item,"TextAlignment").Fields["Value"].Value) ">
                                <h1>@item.Title</h1>
                                <p>@item.ShortText</p>
                                @if (item.CTALink != null && item.CTATitle != null)
                                {
                                    <p><a class="btn carousel btn-lg" href="@item.CTALink.ToString()" role="button">@item.CTATitle</a></p>
                                }

                            </div>
                        </div>
                    </div>
                    j++;

                }



            </div>
            <a class="carousel-control-prev" href="#@Model.GroupId" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#@Model.GroupId" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>

    }
    else if (Sitecore.Context.PageMode.IsExperienceEditor)
    {
        <div style="width:100%;border:1px solid;"> Select Data Source for carousel</div>
    }
</carousel>
